{"_lang":"csharp","_tocPath":"tutorial/toc.html","_navPath":"toc.html","_rel":"../","_path":"tutorial/intro_template.html","_navRel":"../toc.html","_tocRel":"toc.html","_navKey":"~/../toc.yml","_tocKey":"~/../tutorial/toc.yml","conceptual":"\n<p sourcefile=\"../tutorial/intro_template.md\" sourcestartlinenumber=\"4\" sourceendlinenumber=\"4\"><em>DocFX Template System</em> provides a flexible way of defining and using templates.</p>\n<p sourcefile=\"../tutorial/intro_template.md\" sourcestartlinenumber=\"6\" sourceendlinenumber=\"6\">As the following DocFX workflow shows,</p>\n<p sourcefile=\"../tutorial/intro_template.md\" sourcestartlinenumber=\"8\" sourceendlinenumber=\"8\"><img src=\"../spec/images/docfx_workflow_highlevel.png\" alt=\"DocFX workflow\" sourcefile=\"../tutorial/intro_template.md\" sourcestartlinenumber=\"8\" sourceendlinenumber=\"8\"></p>\n<p sourcefile=\"../tutorial/intro_template.md\" sourcestartlinenumber=\"10\" sourceendlinenumber=\"10\">DocFX loads the set of files and transforms them into different data models using different types of <em>Document Processor</em>s. Afterwards, <em>DocFX Template System</em> loads these data models, and transforms them into output files based on the <em>document type</em> of the data model.</p>\n<p sourcefile=\"../tutorial/intro_template.md\" sourcestartlinenumber=\"12\" sourceendlinenumber=\"12\">Each file belongs to a <em>document type</em>. For example, the document type for Markdown files is <code>conceptual</code>, and the document type for <code>toc.md</code> files is <code>Toc</code>.</p>\n<p sourcefile=\"../tutorial/intro_template.md\" sourcestartlinenumber=\"14\" sourceendlinenumber=\"14\">For a specific <em>Template</em>, each <em>document type</em> can have several <em>Renderer</em>s. For a specific file, <em>DocFX Template System</em> picks the corresponding <em>Renderer</em>s to render the input data model into output files.</p>\n<h2 id=\"renderer\" sourcefile=\"../tutorial/intro_template.md\" sourcestartlinenumber=\"16\" sourceendlinenumber=\"17\"><em>Renderer</em></h2>\n<p sourcefile=\"../tutorial/intro_template.md\" sourcestartlinenumber=\"18\" sourceendlinenumber=\"18\"><em>Renderer</em>s are files written in a specific templating language. It is used to transform the input data model into output files.</p>\n<p sourcefile=\"../tutorial/intro_template.md\" sourcestartlinenumber=\"20\" sourceendlinenumber=\"20\">Currently DocFX supports the following templating languages:</p>\n<ol sourcefile=\"../tutorial/intro_template.md\" sourcestartlinenumber=\"21\" sourceendlinenumber=\"22\">\n<li sourcefile=\"../tutorial/intro_template.md\" sourcestartlinenumber=\"21\" sourceendlinenumber=\"21\"><a href=\"http://mustache.github.io\" data-raw-source=\"[Mustache](http://mustache.github.io)\" sourcefile=\"../tutorial/intro_template.md\" sourcestartlinenumber=\"21\" sourceendlinenumber=\"21\">Mustache</a> templating language</li>\n<li sourcefile=\"../tutorial/intro_template.md\" sourcestartlinenumber=\"22\" sourceendlinenumber=\"22\"><a href=\"https://github.com/Shopify/liquid\" data-raw-source=\"[Liquid](https://github.com/Shopify/liquid)\" sourcefile=\"../tutorial/intro_template.md\" sourcestartlinenumber=\"22\" sourceendlinenumber=\"22\">Liquid</a> templating language</li>\n</ol>\n<h3 id=\"naming-rule-for-a-renderer-file\" sourcefile=\"../tutorial/intro_template.md\" sourcestartlinenumber=\"24\" sourceendlinenumber=\"24\">Naming rule for a <em>Renderer</em> file</h3>\n<p sourcefile=\"../tutorial/intro_template.md\" sourcestartlinenumber=\"26\" sourceendlinenumber=\"27\">The naming rule for a <em>Renderer</em> file is:\n<code>&lt;document_type&gt;.&lt;output_extension&gt;[.primary].&lt;template_extension&gt;</code>.</p>\n<ul sourcefile=\"../tutorial/intro_template.md\" sourcestartlinenumber=\"29\" sourceendlinenumber=\"32\">\n<li sourcefile=\"../tutorial/intro_template.md\" sourcestartlinenumber=\"29\" sourceendlinenumber=\"29\"><code>&lt;document_type&gt;</code> is the <em>document type</em> current <em>Renderer</em> responsible to.</li>\n<li sourcefile=\"../tutorial/intro_template.md\" sourcestartlinenumber=\"30\" sourceendlinenumber=\"30\"><code>&lt;output_extension&gt;</code> defines the extension of the output files going through current <em>Renderer</em>. For example, <code>conceptual.html.tmpl</code> transforms <code>file1.md</code> into output file <code>file1.html</code>, and <code>toc.json.tmpl</code> transforms <code>toc.md</code> into output file <code>toc.json</code>.</li>\n<li sourcefile=\"../tutorial/intro_template.md\" sourcestartlinenumber=\"31\" sourceendlinenumber=\"31\"><code>[.primary]</code> is optional. It is used when there are multiple <em>Renderer</em>s with different extension for one particular document type. The output file transformed by the <code>.primary</code> <em>Renderer</em> is used as the file to be linked. The below example describes the behavior in detail.</li>\n<li sourcefile=\"../tutorial/intro_template.md\" sourcestartlinenumber=\"32\" sourceendlinenumber=\"32\"><code>&lt;template_extension&gt;</code> is the extension of the <em>Renderer</em> file based on the templating language it uses. For Mustache <em>Renderer</em>, it is <code>.tmpl</code>, while for Liquid <em>Renderer</em>, it is <code>.liquid</code>.</li>\n</ul>\n<p sourcefile=\"../tutorial/intro_template.md\" sourcestartlinenumber=\"34\" sourceendlinenumber=\"34\">Here is an example.</p>\n<p sourcefile=\"../tutorial/intro_template.md\" sourcestartlinenumber=\"36\" sourceendlinenumber=\"36\">The following template contains two Mustache <em>Renderer</em> files for <code>conceptual</code> document type:</p>\n<pre sourcefile=\"../tutorial/intro_template.md\" sourcestartlinenumber=\"38\" sourceendlinenumber=\"42\"><code>/- some_template/\n    |- conceptual.html.primary.tmpl\n    \\- conceptual.mta.json.tmpl\n</code></pre><p sourcefile=\"../tutorial/intro_template.md\" sourcestartlinenumber=\"43\" sourceendlinenumber=\"43\">There are two Markdown files <code>A.md</code> and <code>B.md</code>, the content for <code>A.md</code> is:</p>\n<pre sourcefile=\"../tutorial/intro_template.md\" sourcestartlinenumber=\"45\" sourceendlinenumber=\"47\"><code class=\"lang-markdown\">[Link To B](B.md)\n</code></pre><p sourcefile=\"../tutorial/intro_template.md\" sourcestartlinenumber=\"49\" sourceendlinenumber=\"49\"><em>DocFX Template System</em> produces two output files for <code>A.md</code>: <code>A.html</code> and <code>A.mta.json</code>, and also two output files for <code>B.md</code>: <code>B.html</code> and <code>B.mta.json</code>. According to <code>conceptual.html.primary.tmpl</code>, <code>.html</code> is the <strong>primary</strong> output file, the link from <code>A.md</code> to <code>B.md</code> is resolved to <code>B.html</code> instead of <code>B.mta.json</code>, which is to say, the content of <code>A.md</code> is transformed to:</p>\n<pre sourcefile=\"../tutorial/intro_template.md\" sourcestartlinenumber=\"51\" sourceendlinenumber=\"53\"><code class=\"lang-html\">&lt;a href=&quot;B.html&quot;&gt;Link To B&lt;/a&gt;\n</code></pre><div class=\"NOTE\" sourcefile=\"../tutorial/intro_template.md\" sourcestartlinenumber=\"55\" sourceendlinenumber=\"55\"><h5>Note</h5><p sourcefile=\"../tutorial/intro_template.md\" sourcestartlinenumber=\"56\" sourceendlinenumber=\"56\">If no <code>primary</code> <em>Renderer</em> is defined, DocFX randomly picks one <em>Renderer</em> as the primary one, and the result is unpredictable.</p>\n</div>\n<h3 id=\"renderer-in-mustache-syntax\" sourcefile=\"../tutorial/intro_template.md\" sourcestartlinenumber=\"58\" sourceendlinenumber=\"58\"><em>Renderer</em> in Mustache syntax</h3>\n<h4 id=\"introduction-to-mustache\" sourcefile=\"../tutorial/intro_template.md\" sourcestartlinenumber=\"60\" sourceendlinenumber=\"60\">Introduction to Mustache</h4>\n<p sourcefile=\"../tutorial/intro_template.md\" sourcestartlinenumber=\"61\" sourceendlinenumber=\"61\"><a href=\"http://mustache.github.io\" data-raw-source=\"[Mustache](http://mustache.github.io)\" sourcefile=\"../tutorial/intro_template.md\" sourcestartlinenumber=\"61\" sourceendlinenumber=\"61\">Mustache</a> is a logic-less template syntax containing only <em>tag</em>s. It works by expanding tags in a template using values provided in a hash or object. <em>Tag</em>s are indicated by the double mustaches. <code>{{name}}</code> is a tag, it tries to find the <strong>name</strong> key in current context, and replace it with the value of <strong>name</strong>. <a href=\"http://mustache.github.io/mustache.5.html\" data-raw-source=\"[mustache.5](http://mustache.github.io/mustache.5.html)\" sourcefile=\"../tutorial/intro_template.md\" sourcestartlinenumber=\"61\" sourceendlinenumber=\"61\">mustache.5</a> lists the syntax of Mustache in detail.</p>\n<h4 id=\"naming-rule\" sourcefile=\"../tutorial/intro_template.md\" sourcestartlinenumber=\"63\" sourceendlinenumber=\"63\">Naming rule</h4>\n<p sourcefile=\"../tutorial/intro_template.md\" sourcestartlinenumber=\"64\" sourceendlinenumber=\"64\"><em>Renderer</em>s in <a href=\"http://mustache.github.io\" data-raw-source=\"[Mustache](http://mustache.github.io)\" sourcefile=\"../tutorial/intro_template.md\" sourcestartlinenumber=\"64\" sourceendlinenumber=\"64\">Mustache</a> syntax <strong>MUST</strong> end with <code>.tmpl</code> extension.</p>\n<h4 id=\"mustache-partials\" sourcefile=\"../tutorial/intro_template.md\" sourcestartlinenumber=\"66\" sourceendlinenumber=\"66\">Mustache Partials</h4>\n<p sourcefile=\"../tutorial/intro_template.md\" sourcestartlinenumber=\"67\" sourceendlinenumber=\"67\"><a href=\"http://mustache.github.io/mustache.5.html#Partials\" data-raw-source=\"[Mustache Partials](http://mustache.github.io/mustache.5.html#Partials)\" sourcefile=\"../tutorial/intro_template.md\" sourcestartlinenumber=\"67\" sourceendlinenumber=\"67\">Mustache Partials</a> is also supported in <em>DocFX Template System</em>. <strong>Partials</strong> are common sections of <em>Renderer</em> that can be shared by multiple <em>Renderer</em> files. <strong>Partials</strong> <strong>MUST</strong> end with <code>.tmpl.partial</code>.</p>\n<p sourcefile=\"../tutorial/intro_template.md\" sourcestartlinenumber=\"69\" sourceendlinenumber=\"69\">For example, inside a <em>Template</em>, there is a <strong>Partial</strong> file <code>part.tmpl.partial</code> with content:</p>\n<pre sourcefile=\"../tutorial/intro_template.md\" sourcestartlinenumber=\"70\" sourceendlinenumber=\"73\"><code class=\"lang-mustache\">Inside Partial\n{{ name }}\n</code></pre><p sourcefile=\"../tutorial/intro_template.md\" sourcestartlinenumber=\"75\" sourceendlinenumber=\"75\">To reuse this <strong>Partial</strong> file, <em>Renderer</em> file uses the following syntax:</p>\n<pre sourcefile=\"../tutorial/intro_template.md\" sourcestartlinenumber=\"76\" sourceendlinenumber=\"79\"><code class=\"lang-mustache\">Inside Renderer\n{{ &gt;part }}\n</code></pre><p sourcefile=\"../tutorial/intro_template.md\" sourcestartlinenumber=\"81\" sourceendlinenumber=\"81\">It has the same effect with the following <em>Renderer</em> file:</p>\n<pre sourcefile=\"../tutorial/intro_template.md\" sourcestartlinenumber=\"82\" sourceendlinenumber=\"86\"><code class=\"lang-mustache\">Inside Renderer\nInside Partial\n{{ name }}\n</code></pre><h4 id=\"extended-syntax-for-dependencies\" sourcefile=\"../tutorial/intro_template.md\" sourcestartlinenumber=\"88\" sourceendlinenumber=\"88\">Extended syntax for Dependencies</h4>\n<p sourcefile=\"../tutorial/intro_template.md\" sourcestartlinenumber=\"89\" sourceendlinenumber=\"89\">When rendering the input data model into output files, for example, html files, the html file may rely on other files to display correctly. For example, the html file dependents on stylesheet file <code>main.css</code>. We call such file <code>main.css</code> a <em>Dependency</em> to the <em>Renderer</em>. </p>\n<p sourcefile=\"../tutorial/intro_template.md\" sourcestartlinenumber=\"91\" sourceendlinenumber=\"91\">DocFX introduces the following syntax to define the dependency for the <em>Renderer</em>:</p>\n<pre sourcefile=\"../tutorial/intro_template.md\" sourcestartlinenumber=\"93\" sourceendlinenumber=\"95\"><code class=\"lang-mustache\">{{!include(&#39;&lt;file_name&gt;&#39;)}}\n</code></pre><p sourcefile=\"../tutorial/intro_template.md\" sourcestartlinenumber=\"97\" sourceendlinenumber=\"97\"><code>docfx</code> copies these dependencies to output folder preserving its relative path to the <em>Renderer</em> file.</p>\n<div class=\"TIP\" sourcefile=\"../tutorial/intro_template.md\" sourcestartlinenumber=\"100\" sourceendlinenumber=\"100\"><h5>Tip</h5><p sourcefile=\"../tutorial/intro_template.md\" sourcestartlinenumber=\"101\" sourceendlinenumber=\"102\">Mustache is logic-less, and for a specific <code>{{name}}</code> tag, Mustache searches its context and its parent context recursively.\nSo most of the time <a href=\"#preprocessor\" data-raw-source=\"[*Preprocessor File*](#preprocessor)\" sourcefile=\"../tutorial/intro_template.md\" sourcestartlinenumber=\"102\" sourceendlinenumber=\"102\"><em>Preprocessor File</em></a> is used to re-define the data model used by the Mustache <em>Renderer</em>.</p>\n</div>\n<h3 id=\"renderer-in-liquid-syntax\" sourcefile=\"../tutorial/intro_template.md\" sourcestartlinenumber=\"104\" sourceendlinenumber=\"104\"><em>Renderer</em> in Liquid syntax</h3>\n<h4 id=\"naming-rule-1\" sourcefile=\"../tutorial/intro_template.md\" sourcestartlinenumber=\"106\" sourceendlinenumber=\"106\">Naming rule</h4>\n<p sourcefile=\"../tutorial/intro_template.md\" sourcestartlinenumber=\"107\" sourceendlinenumber=\"107\"><em>Renderer</em>s in <a href=\"https://github.com/Shopify/liquid\" data-raw-source=\"[Liquid](https://github.com/Shopify/liquid)\" sourcefile=\"../tutorial/intro_template.md\" sourcestartlinenumber=\"107\" sourceendlinenumber=\"107\">Liquid</a> syntax <strong>MUST</strong> end with <code>.liquid</code> extension. Liquid contains <a href=\"https://help.shopify.com/themes/liquid/tags/theme-tags#include\" data-raw-source=\"[include](https://help.shopify.com/themes/liquid/tags/theme-tags#include)\" sourcefile=\"../tutorial/intro_template.md\" sourcestartlinenumber=\"107\" sourceendlinenumber=\"107\">include</a> tag to support partials, we follow the ruby partials naming convention to have <code>_&lt;partialName&gt;.liquid</code> as partial template. </p>\n<h4 id=\"extended-syntax-for-dependencies-1\" sourcefile=\"../tutorial/intro_template.md\" sourcestartlinenumber=\"109\" sourceendlinenumber=\"109\">Extended syntax for Dependencies</h4>\n<p sourcefile=\"../tutorial/intro_template.md\" sourcestartlinenumber=\"110\" sourceendlinenumber=\"110\">DocFX introduces a custom tag <code>ref</code>, e.g. <code>{% ref file1 %}</code>, to specify the resource files that current template depends on.</p>\n<h2 id=\"preprocessor\" sourcefile=\"../tutorial/intro_template.md\" sourcestartlinenumber=\"112\" sourceendlinenumber=\"113\"><em>Preprocessor</em></h2>\n<p sourcefile=\"../tutorial/intro_template.md\" sourcestartlinenumber=\"114\" sourceendlinenumber=\"114\"><em>Renderer</em>s take the input data model produced by document processor and render them into output files. Sometimes the input data model is not exactly what <em>Renderer</em>s want. <em>DocFX Template System</em> introduces the concept of <em>Preprocessor</em> to transform the input data model into what <em>Renderer</em>s exactly want. We call the data model <em>Preprocessor</em> returns the <em>View Model</em>. <em>View Model</em> is the data model to apply <em>Renderer</em>.</p>\n<h3 id=\"naming-rule-for-preprocessor\" sourcefile=\"../tutorial/intro_template.md\" sourcestartlinenumber=\"116\" sourceendlinenumber=\"116\">Naming rule for <em>Preprocessor</em></h3>\n<p sourcefile=\"../tutorial/intro_template.md\" sourcestartlinenumber=\"117\" sourceendlinenumber=\"117\">The naming of <em>Preprocessor</em> follows the naming of <em>Renderer</em> with file extension changes to <code>.js</code>: <code>&lt;renderer_file_name_without_extension&gt;.js</code>.</p>\n<p sourcefile=\"../tutorial/intro_template.md\" sourcestartlinenumber=\"119\" sourceendlinenumber=\"119\">If a <em>Preprocessor</em> has no corresponding <em>Renderer</em> however it still needs to be executed, for example, to run <a href=\"#function-signature\" data-raw-source=\"[`exports.getOptions` function](#function-signature)\" sourcefile=\"../tutorial/intro_template.md\" sourcestartlinenumber=\"119\" sourceendlinenumber=\"119\"><code>exports.getOptions</code> function</a>, it should be named as <code>&lt;document_type&gt;.tmpl.js</code>.</p>\n<h3 id=\"syntax-for-preprocessor\" sourcefile=\"../tutorial/intro_template.md\" sourcestartlinenumber=\"121\" sourceendlinenumber=\"121\">Syntax for <em>Preprocessor</em></h3>\n<p sourcefile=\"../tutorial/intro_template.md\" sourcestartlinenumber=\"122\" sourceendlinenumber=\"122\"><em>Preprocessor</em>s are JavaScript files following <a href=\"http://www.ecma-international.org/ecma-262/5.1/\" data-raw-source=\"[ECMAScript 5.1](http://www.ecma-international.org/ecma-262/5.1/)\" sourcefile=\"../tutorial/intro_template.md\" sourcestartlinenumber=\"122\" sourceendlinenumber=\"122\">ECMAScript 5.1</a> standard. <em>DocFX Template System</em> uses <a href=\"https://github.com/sebastienros/jint\" data-raw-source=\"[Jint](https://github.com/sebastienros/jint)\" sourcefile=\"../tutorial/intro_template.md\" sourcestartlinenumber=\"122\" sourceendlinenumber=\"122\">Jint</a> as JavaScript Engine, and provides several additional functions for easy debugging and integration.</p>\n<h4 id=\"module\" sourcefile=\"../tutorial/intro_template.md\" sourcestartlinenumber=\"124\" sourceendlinenumber=\"124\">Module</h4>\n<p sourcefile=\"../tutorial/intro_template.md\" sourcestartlinenumber=\"125\" sourceendlinenumber=\"126\"><em>Preprocessor</em> leverages the concept of <em>Module</em> as similar to the <a href=\"https://nodejs.org/dist/latest-v6.x/docs/api/modules.html\" data-raw-source=\"[Module in Node.js](https://nodejs.org/dist/latest-v6.x/docs/api/modules.html)\" sourcefile=\"../tutorial/intro_template.md\" sourcestartlinenumber=\"125\" sourceendlinenumber=\"125\">Module in Node.js</a>. The syntax of Module in <em>Preprocessor</em> is a <em>subset</em> of the one in Node.js. The advantage of the Module concept is that the <em>Preprocessor</em> script file can also be run in Node.js.\nThe Module syntax in <em>Preprocessor</em> is simple,</p>\n<ol sourcefile=\"../tutorial/intro_template.md\" sourcestartlinenumber=\"128\" sourceendlinenumber=\"128\">\n<li sourcefile=\"../tutorial/intro_template.md\" sourcestartlinenumber=\"128\" sourceendlinenumber=\"128\">To export function property from one Module file <code>common.js</code>:</li>\n</ol>\n<pre sourcefile=\"../tutorial/intro_template.md\" sourcestartlinenumber=\"129\" sourceendlinenumber=\"131\"><code class=\"lang-js\">exports.util = function () {}\n</code></pre><ol start=\"2\" sourcefile=\"../tutorial/intro_template.md\" sourcestartlinenumber=\"133\" sourceendlinenumber=\"133\">\n<li sourcefile=\"../tutorial/intro_template.md\" sourcestartlinenumber=\"133\" sourceendlinenumber=\"133\">To use the exported function property inside <code>common.js</code>:</li>\n</ol>\n<pre sourcefile=\"../tutorial/intro_template.md\" sourcestartlinenumber=\"134\" sourceendlinenumber=\"138\"><code class=\"lang-js\">var common = require(&#39;./common.js&#39;);\n// call util\ncommon.util();\n</code></pre><div class=\"NOTE\" sourcefile=\"../tutorial/intro_template.md\" sourcestartlinenumber=\"140\" sourceendlinenumber=\"140\"><h5>Note</h5><p sourcefile=\"../tutorial/intro_template.md\" sourcestartlinenumber=\"141\" sourceendlinenumber=\"141\">Only relative path starting with <code>./</code> is supported.</p>\n</div>\n<h4 id=\"log\" sourcefile=\"../tutorial/intro_template.md\" sourcestartlinenumber=\"143\" sourceendlinenumber=\"143\">Log</h4>\n<p sourcefile=\"../tutorial/intro_template.md\" sourcestartlinenumber=\"144\" sourceendlinenumber=\"144\">You can call the following functions to log messages with different error level: <code>console.log</code>, <code>console.warn</code> or <code>console.warning</code> and <code>console.err</code>.</p>\n<h3 id=\"function-signature\" sourcefile=\"../tutorial/intro_template.md\" sourcestartlinenumber=\"146\" sourceendlinenumber=\"146\">Function Signature</h3>\n<p sourcefile=\"../tutorial/intro_template.md\" sourcestartlinenumber=\"147\" sourceendlinenumber=\"147\">A <em>Preprocessor</em> file is also considered as a Module. It <strong>MUST</strong> export the function property with the signature required by <code>docfx</code>&#39;s prescriptive interop pattern.</p>\n<p sourcefile=\"../tutorial/intro_template.md\" sourcestartlinenumber=\"149\" sourceendlinenumber=\"149\">There are two functions defined.</p>\n<h4 id=\"function-1-exportsgetoptions\" sourcefile=\"../tutorial/intro_template.md\" sourcestartlinenumber=\"151\" sourceendlinenumber=\"151\">Function 1: <code>exports.getOptions</code></h4>\n<p sourcefile=\"../tutorial/intro_template.md\" sourcestartlinenumber=\"152\" sourceendlinenumber=\"152\">Function property <code>getOptions</code> takes the data model produced by document processor as the input argument, and the return value must be an object with the following properties:</p>\n<table sourcefile=\"../tutorial/intro_template.md\" sourcestartlinenumber=\"154\" sourceendlinenumber=\"156\">\n<thead>\n<tr>\n<th>Property Name</th>\n<th>Type</th>\n<th>Description</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>isShared</td>\n<td>bool</td>\n<td>Defines whether the input data model can be accessed by other data models when <code>transform</code>. By default the value is <code>false</code>. If it is set to <code>true</code>, the data model will be stored into <a href=\"#globally-shared-properties\" data-raw-source=\"[Globally Shared Properties](#globally-shared-properties)\" sourcefile=\"../tutorial/intro_template.md\" sourcestartlinenumber=\"156\" sourceendlinenumber=\"156\">Globally Shared Properties</a>.</td>\n</tr>\n</tbody>\n</table>\n<p sourcefile=\"../tutorial/intro_template.md\" sourcestartlinenumber=\"158\" sourceendlinenumber=\"158\">A sample <code>exports.getOptions</code> defined in <code>toc.tmpl.js</code> is:</p>\n<pre sourcefile=\"../tutorial/intro_template.md\" sourcestartlinenumber=\"159\" sourceendlinenumber=\"165\"><code class=\"lang-js\">exports.getOptions = function (model) {\n    return {\n        isShared: true;\n    };\n}\n</code></pre><!-- TODO: add bookmarks part when it is implemented -->\n\n<h4 id=\"function-2-exportstransform\" sourcefile=\"../tutorial/intro_template.md\" sourcestartlinenumber=\"169\" sourceendlinenumber=\"169\">Function 2: <code>exports.transform</code></h4>\n<p sourcefile=\"../tutorial/intro_template.md\" sourcestartlinenumber=\"170\" sourceendlinenumber=\"170\">Function property <code>transform</code> takes the data model produced by document processor (described in further detail in <a href=\"#the-input-data-model\" data-raw-source=\"[The Input Data Model](#the-input-data-model)\" sourcefile=\"../tutorial/intro_template.md\" sourcestartlinenumber=\"170\" sourceendlinenumber=\"170\">The Input Data Model</a>) as the input argument, and returns the <em>View Model</em>. <em>View Model</em> is the exact model to apply the corresponding <em>Renderer</em>.</p>\n<p sourcefile=\"../tutorial/intro_template.md\" sourcestartlinenumber=\"172\" sourceendlinenumber=\"172\">A sample <code>exports.transform</code> for <code>conceptual.txt.js</code> is:</p>\n<pre sourcefile=\"../tutorial/intro_template.md\" sourcestartlinenumber=\"173\" sourceendlinenumber=\"178\"><code class=\"lang-js\">exports.transform = function (model) {\n    model._title = &quot;Hello World&quot;\n    return model;\n}\n</code></pre><p sourcefile=\"../tutorial/intro_template.md\" sourcestartlinenumber=\"179\" sourceendlinenumber=\"179\">If <code>conceptual.txt.tmpl</code> is:</p>\n<pre sourcefile=\"../tutorial/intro_template.md\" sourcestartlinenumber=\"180\" sourceendlinenumber=\"182\"><code class=\"lang-mustache\">{{{_title}}}\n</code></pre><p sourcefile=\"../tutorial/intro_template.md\" sourcestartlinenumber=\"184\" sourceendlinenumber=\"184\">Then Markdown file <code>A.md</code> is transformed to <code>A.txt</code> with content:</p>\n<pre sourcefile=\"../tutorial/intro_template.md\" sourcestartlinenumber=\"185\" sourceendlinenumber=\"187\"><code>Hello World\n</code></pre><div class=\"TIP\" sourcefile=\"../tutorial/intro_template.md\" sourcestartlinenumber=\"189\" sourceendlinenumber=\"189\"><h5>Tip</h5><p sourcefile=\"../tutorial/intro_template.md\" sourcestartlinenumber=\"190\" sourceendlinenumber=\"191\">For each file, the input data model can be exported to a JSON file by calling <code>docfx build --exportRawModel</code>.\nAnd the returned <em>View Model</em> can be exported to a JSON file by calling <code>docfx build --exportViewModel</code>.</p>\n</div>\n<h2 id=\"the-input-data-model\" sourcefile=\"../tutorial/intro_template.md\" sourcestartlinenumber=\"193\" sourceendlinenumber=\"194\">The Input Data Model</h2>\n<p sourcefile=\"../tutorial/intro_template.md\" sourcestartlinenumber=\"195\" sourceendlinenumber=\"195\">The input data model used by <code>transform</code> not only contains properties extracted from the content of the file, but also system generated properties and globally shared properties.</p>\n<h3 id=\"system-generated-properties\" sourcefile=\"../tutorial/intro_template.md\" sourcestartlinenumber=\"197\" sourceendlinenumber=\"197\">System Generated Properties</h3>\n<p sourcefile=\"../tutorial/intro_template.md\" sourcestartlinenumber=\"198\" sourceendlinenumber=\"198\">System generated property names start with underscore <code>_</code>, as listed in the following table:</p>\n<table sourcefile=\"../tutorial/intro_template.md\" sourcestartlinenumber=\"200\" sourceendlinenumber=\"209\">\n<thead>\n<tr>\n<th>Name</th>\n<th>Description</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>_rel</td>\n<td>The relative path of the root output folder from current output file. For example, if the output file is <code>a/b/c.html</code> from root output folder, then the value is <code>../../</code>.</td>\n</tr>\n<tr>\n<td>_path</td>\n<td>The path of current output file starting from root output folder.</td>\n</tr>\n<tr>\n<td>_navPath</td>\n<td>The relative path of the root TOC file from root output folder, if exists. The root TOC file stands for the TOC file in root output folder. For example, if the output file is html file, the value is <code>toc.html</code>.</td>\n</tr>\n<tr>\n<td>_navRel</td>\n<td>The relative path from current output file to the root TOC file, if exists. For example, if the root TOC file is <code>toc.html</code> from root output folder, the value is empty.</td>\n</tr>\n<tr>\n<td>_navKey</td>\n<td>The original file path of the root TOC file starting with <code>~/</code>. <code>~/</code> stands for the folder where <code>docfx.json</code> is in, for example, <code>~/toc.md</code>.</td>\n</tr>\n<tr>\n<td>_tocPath</td>\n<td>The relative path of the TOC file that current output file belongs to from root output folder, if current output file is in that TOC file. If current output file is not defined in any TOC file, the nearest TOC file is picked.</td>\n</tr>\n<tr>\n<td>_tocRel</td>\n<td>The relative path from current output file to its TOC file. For example, if the TOC file is <code>a/toc.html</code> from root output folder, the value is <code>../</code>.</td>\n</tr>\n<tr>\n<td>_tocKey</td>\n<td>The original file path of the TOC file starting with <code>~/</code>. <code>~/</code> stands for the folder where <code>docfx.json</code> is in, for example, <code>~/a/toc.yml</code>.</td>\n</tr>\n</tbody>\n</table>\n<div class=\"NOTE\" sourcefile=\"../tutorial/intro_template.md\" sourcestartlinenumber=\"211\" sourceendlinenumber=\"211\"><h5>Note</h5><p sourcefile=\"../tutorial/intro_template.md\" sourcestartlinenumber=\"212\" sourceendlinenumber=\"212\">Users can also override system generated properties by using <em>YAML Header</em>, <code>fileMetadata</code> or <code>globalMetadata</code>.</p>\n</div>\n<h3 id=\"globally-shared-properties\" sourcefile=\"../tutorial/intro_template.md\" sourcestartlinenumber=\"214\" sourceendlinenumber=\"214\">Globally Shared Properties</h3>\n<p sourcefile=\"../tutorial/intro_template.md\" sourcestartlinenumber=\"215\" sourceendlinenumber=\"216\">Globally shared properties are stored in <code>__global</code> key for every data model. Its initial value is read from <code>global.json</code> inside the <em>Template</em> if the file exists.\nIf a data model has <code>isShared</code> equal to <code>true</code> with the above <code>getOptions</code> function property, it is stored in <code>__global._shared</code> with the original path starting with <code>~/</code> as the key.</p>\n","type":"Conceptual","source":{"remote":{"path":"Documentation/tutorial/intro_template.md","branch":"doc","repo":"https://github.com/dotnet/docfx.git"},"startLine":0.0,"endLine":0.0,"isExternal":false},"path":"../tutorial/intro_template.md","documentation":{"remote":{"path":"Documentation/tutorial/intro_template.md","branch":"doc","repo":"https://github.com/dotnet/docfx.git"},"startLine":0.0,"endLine":0.0,"isExternal":false},"_docfxVersion":"2.15.0.424","_systemKeys":["conceptual","type","source","path","documentation","title","rawTitle","wordCount"],"title":"Introduction to DocFX Template System","rawTitle":"<h1 id=\"introduction-to-docfx-template-system\" sourcefile=\"../tutorial/intro_template.md\" sourcestartlinenumber=\"1\" sourceendlinenumber=\"2\">Introduction to <em>DocFX Template System</em></h1>","wordCount":1601.0,"__global":{"classesInSubtitle":"Classes","structsInSubtitle":"Structs","interfacesInSubtitle":"Interfaces","enumsInSubtitle":"Enums","delegatesInSubtitle":"Delegates","constructorsInSubtitle":"Constructors","fieldsInSubtitle":"Fields","propertiesInSubtitle":"Properties","methodsInSubtitle":"Methods","eventsInSubtitle":"Events","operatorsInSubtitle":"Operators","eiisInSubtitle":"Explicit Interface Implementations","improveThisDoc":"Improve this Doc","viewSource":"View Source","inheritance":"Inheritance","inheritedMembers":"Inherited Members","namespace":"Namespace","assembly":"Assembly","syntax":"Syntax","overrides":"Overrides","implements":"Implements","remarks":"Remarks","examples":"Examples","seealso":"See Also","declaration":"Declaration","parameters":"Parameters","typeParameters":"Type Parameters","type":"Type","name":"Name","description":"Description","returns":"Returns","fieldValue":"Field Value","propertyValue":"Property Value","eventType":"Event Type","exceptions":"Exceptions","condition":"Condition","extensionMethods":"Extension Methods","note":"<h5>Note</h5>","warning":"<h5>Warning</h5>","tip":"<h5>Tip</h5>","important":"<h5>Important</h5>","caution":"<h5>Caution</h5>","_shared":{}},"_disableToc":false,"docurl":"https://github.com/dotnet/docfx/blob/doc/Documentation/tutorial/intro_template.md/#L1"}