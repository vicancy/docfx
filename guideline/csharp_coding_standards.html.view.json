{"_lang":"csharp","_tocPath":"guideline/toc.html","_navPath":"toc.html","_rel":"../","_path":"guideline/csharp_coding_standards.html","_navRel":"../toc.html","_tocRel":"toc.html","_navKey":"~/../toc.yml","_tocKey":"~/../guideline/toc.md","conceptual":"\n<h2 id=\"introduction\" sourcefile=\"../guideline/csharp_coding_standards.md\" sourcestartlinenumber=\"8\" sourceendlinenumber=\"9\">Introduction</h2>\n<p sourcefile=\"../guideline/csharp_coding_standards.md\" sourcestartlinenumber=\"10\" sourceendlinenumber=\"10\">The C# Coding Standards will be used in conjunction with customized versions of <em>StyleCop</em> and <em>FxCop</em> [<strong>TODO</strong>] during both development and build process. This will help ensure that all developers on the team are in a consistent manner.</p>\n<blockquote sourcefile=\"../guideline/csharp_coding_standards.md\" sourcestartlinenumber=\"12\" sourceendlinenumber=\"12\"><p sourcefile=\"../guideline/csharp_coding_standards.md\" sourcestartlinenumber=\"12\" sourceendlinenumber=\"12\">&quot;Any fool can write code that a computer can understand. Good programmers write code that humans understand&quot;.</p>\n<p sourcefile=\"../guideline/csharp_coding_standards.md\" sourcestartlinenumber=\"14\" sourceendlinenumber=\"14\">Martin Fowler. <em>Refactoring: Improving the design of existing code.</em></p>\n</blockquote>\n<h3 id=\"purpose\" sourcefile=\"../guideline/csharp_coding_standards.md\" sourcestartlinenumber=\"16\" sourceendlinenumber=\"16\">Purpose</h3>\n<p sourcefile=\"../guideline/csharp_coding_standards.md\" sourcestartlinenumber=\"18\" sourceendlinenumber=\"18\">This section defines a set of C# coding standards to be used by the DocFX build team to guarantee maximum legibility, reliability, re-usability and homogeneity of our code. Each section is marked <em>Mandatory</em> or <em>Recommended</em>. <em>Mandatory</em> sections will be enforced during code reviews as well as tools like <em>StyleCop</em> and <em>FxCop</em>, and code will not be considered complete until it is compliant.</p>\n<h3 id=\"scope\" sourcefile=\"../guideline/csharp_coding_standards.md\" sourcestartlinenumber=\"20\" sourceendlinenumber=\"20\">Scope</h3>\n<p sourcefile=\"../guideline/csharp_coding_standards.md\" sourcestartlinenumber=\"22\" sourceendlinenumber=\"22\">This section contains general C# coding standards that can be applied to any type of application developed in C#, based upon <em><a href=\"http://msdn.microsoft.com/en-us/library/ms229042.aspx\" data-raw-source=\"[Framework Design Guidelines](http://msdn.microsoft.com/en-us/library/ms229042.aspx)\" sourcefile=\"../guideline/csharp_coding_standards.md\" sourcestartlinenumber=\"22\" sourceendlinenumber=\"22\">Framework Design Guidelines</a></em>.</p>\n<p sourcefile=\"../guideline/csharp_coding_standards.md\" sourcestartlinenumber=\"24\" sourceendlinenumber=\"24\">This section is not intended to be a tutorial on C#. Instead, it includes a set of limitations and recommendations focused on clarifying the development.</p>\n<h2 id=\"tools\" sourcefile=\"../guideline/csharp_coding_standards.md\" sourcestartlinenumber=\"26\" sourceendlinenumber=\"27\">Tools</h2>\n<ul sourcefile=\"../guideline/csharp_coding_standards.md\" sourcestartlinenumber=\"29\" sourceendlinenumber=\"31\">\n<li sourcefile=\"../guideline/csharp_coding_standards.md\" sourcestartlinenumber=\"29\" sourceendlinenumber=\"29\"><a href=\"http://www.jetbrains.com/resharper/\" data-raw-source=\"[ReSharper](http://www.jetbrains.com/resharper/)\" sourcefile=\"../guideline/csharp_coding_standards.md\" sourcestartlinenumber=\"29\" sourceendlinenumber=\"29\">ReSharper</a> is a useful third-party code cleanup and style tool.</li>\n<li sourcefile=\"../guideline/csharp_coding_standards.md\" sourcestartlinenumber=\"30\" sourceendlinenumber=\"30\"><a href=\"http://stylecop.codeplex.com/\" data-raw-source=\"[StyleCop](http://stylecop.codeplex.com/)\" sourcefile=\"../guideline/csharp_coding_standards.md\" sourcestartlinenumber=\"30\" sourceendlinenumber=\"30\">StyleCop</a> analyzes C# source code to enforce a set of style and consistency rules and has been integrated into many third-party development tools such as ReSharper.</li>\n<li sourcefile=\"../guideline/csharp_coding_standards.md\" sourcestartlinenumber=\"31\" sourceendlinenumber=\"31\"><a href=\"http://codebox/SDLFxCop\" data-raw-source=\"[FxCop](http://codebox/SDLFxCop)\" sourcefile=\"../guideline/csharp_coding_standards.md\" sourcestartlinenumber=\"31\" sourceendlinenumber=\"31\">FxCop</a> is an application that analyzes managed code assemblies (code that targets the .NET Framework common language runtime) and reports information about the assemblies, such as possible design, localization, performance, and security improvements.</li>\n</ul>\n<h2 id=\"highlights-of-coding-standards\" sourcefile=\"../guideline/csharp_coding_standards.md\" sourcestartlinenumber=\"33\" sourceendlinenumber=\"34\">Highlights of Coding Standards</h2>\n<p sourcefile=\"../guideline/csharp_coding_standards.md\" sourcestartlinenumber=\"36\" sourceendlinenumber=\"36\">This section is not intended to give a summary of all the coding standards enabled by our customized StyleCop, but to give a highlight of some rules one will possibly meet in daily coding life. It also provides some coding standards that are recommended but not mandatory (that is, not enabled by StyleCop).</p>\n<h3 id=\"file-layout-recommended\" sourcefile=\"../guideline/csharp_coding_standards.md\" sourcestartlinenumber=\"38\" sourceendlinenumber=\"38\">File Layout (Recommended)</h3>\n<p sourcefile=\"../guideline/csharp_coding_standards.md\" sourcestartlinenumber=\"39\" sourceendlinenumber=\"39\">Only one public class is allowed per file.</p>\n<p sourcefile=\"../guideline/csharp_coding_standards.md\" sourcestartlinenumber=\"41\" sourceendlinenumber=\"41\">The file name derives from the class name.</p>\n<pre sourcefile=\"../guideline/csharp_coding_standards.md\" sourcestartlinenumber=\"43\" sourceendlinenumber=\"44\"><code>Class   : Observer\nFilename: Observer.cs\n</code></pre><h3 id=\"class-definition-order-mandatory\" sourcefile=\"../guideline/csharp_coding_standards.md\" sourcestartlinenumber=\"46\" sourceendlinenumber=\"46\">Class Definition Order (Mandatory)</h3>\n<p sourcefile=\"../guideline/csharp_coding_standards.md\" sourcestartlinenumber=\"48\" sourceendlinenumber=\"48\">The class definition contains class members in the following order, from <em>less</em> restricted scope (public) to <em>more</em> restrictive (private):</p>\n<ul sourcefile=\"../guideline/csharp_coding_standards.md\" sourcestartlinenumber=\"50\" sourceendlinenumber=\"56\">\n<li sourcefile=\"../guideline/csharp_coding_standards.md\" sourcestartlinenumber=\"50\" sourceendlinenumber=\"50\"><del>~ Nested types, e.g. classes, enum, struct, etc.</del>~ Non-private nested types are not allowed.</li>\n<li sourcefile=\"../guideline/csharp_coding_standards.md\" sourcestartlinenumber=\"51\" sourceendlinenumber=\"51\">Field members (for example, member variables, const, etc.)</li>\n<li sourcefile=\"../guideline/csharp_coding_standards.md\" sourcestartlinenumber=\"52\" sourceendlinenumber=\"56\">Member functions<ul sourcefile=\"../guideline/csharp_coding_standards.md\" sourcestartlinenumber=\"53\" sourceendlinenumber=\"56\">\n<li sourcefile=\"../guideline/csharp_coding_standards.md\" sourcestartlinenumber=\"53\" sourceendlinenumber=\"53\">Constructors</li>\n<li sourcefile=\"../guideline/csharp_coding_standards.md\" sourcestartlinenumber=\"54\" sourceendlinenumber=\"54\">Finalizer (Do not use unless absolutely necessary)</li>\n<li sourcefile=\"../guideline/csharp_coding_standards.md\" sourcestartlinenumber=\"55\" sourceendlinenumber=\"55\">Methods (Properties, Events, Operations, Overridables and Static)</li>\n<li sourcefile=\"../guideline/csharp_coding_standards.md\" sourcestartlinenumber=\"56\" sourceendlinenumber=\"56\">Private nested types</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"naming-mandatory\" sourcefile=\"../guideline/csharp_coding_standards.md\" sourcestartlinenumber=\"59\" sourceendlinenumber=\"59\">Naming (Mandatory)</h3>\n<ul sourcefile=\"../guideline/csharp_coding_standards.md\" sourcestartlinenumber=\"60\" sourceendlinenumber=\"90\">\n<li sourcefile=\"../guideline/csharp_coding_standards.md\" sourcestartlinenumber=\"60\" sourceendlinenumber=\"60\"><strong>DO</strong> use plural form for namespaces</li>\n<li sourcefile=\"../guideline/csharp_coding_standards.md\" sourcestartlinenumber=\"61\" sourceendlinenumber=\"69\"><p sourcefile=\"../guideline/csharp_coding_standards.md\" sourcestartlinenumber=\"61\" sourceendlinenumber=\"61\"><strong>DO</strong> use PascalCasing for all public member, type, and namespace names consisting of multiple words.</p>\n<p sourcefile=\"../guideline/csharp_coding_standards.md\" sourcestartlinenumber=\"63\" sourceendlinenumber=\"65\">  PropertyDescriptor\n  HtmlTag\n  IOStream</p>\n<blockquote sourcefile=\"../guideline/csharp_coding_standards.md\" sourcestartlinenumber=\"67\" sourceendlinenumber=\"67\"><p sourcefile=\"../guideline/csharp_coding_standards.md\" sourcestartlinenumber=\"67\" sourceendlinenumber=\"67\"><strong>Note</strong></p>\n<p sourcefile=\"../guideline/csharp_coding_standards.md\" sourcestartlinenumber=\"69\" sourceendlinenumber=\"69\">A special case is made for two-letter acronyms in which both letters are capitalized, e.g. <em>IOStream</em></p>\n</blockquote>\n</li>\n<li sourcefile=\"../guideline/csharp_coding_standards.md\" sourcestartlinenumber=\"71\" sourceendlinenumber=\"75\"><p sourcefile=\"../guideline/csharp_coding_standards.md\" sourcestartlinenumber=\"71\" sourceendlinenumber=\"71\"><strong>DO</strong> use camelCasing for parameter names.</p>\n<p sourcefile=\"../guideline/csharp_coding_standards.md\" sourcestartlinenumber=\"73\" sourceendlinenumber=\"75\">  propertyDescriptor\n  htmlTag\n  ioStream</p>\n</li>\n<li sourcefile=\"../guideline/csharp_coding_standards.md\" sourcestartlinenumber=\"77\" sourceendlinenumber=\"79\"><p sourcefile=\"../guideline/csharp_coding_standards.md\" sourcestartlinenumber=\"77\" sourceendlinenumber=\"77\"><strong>DO</strong> start with underscore for private fields:</p>\n<p sourcefile=\"../guideline/csharp_coding_standards.md\" sourcestartlinenumber=\"79\" sourceendlinenumber=\"79\">  private readonly Guid _userId = Guid.NewGuid();</p>\n</li>\n<li sourcefile=\"../guideline/csharp_coding_standards.md\" sourcestartlinenumber=\"81\" sourceendlinenumber=\"84\"><p sourcefile=\"../guideline/csharp_coding_standards.md\" sourcestartlinenumber=\"81\" sourceendlinenumber=\"81\"><strong>DO</strong> start static readonly field and constant names with capitalized case</p>\n<p sourcefile=\"../guideline/csharp_coding_standards.md\" sourcestartlinenumber=\"83\" sourceendlinenumber=\"84\">  private static readonly IEntityAccessor EntityAccessor = null;\n      private const string MetadataName = &quot;MetadataName&quot;;</p>\n</li>\n<li sourcefile=\"../guideline/csharp_coding_standards.md\" sourcestartlinenumber=\"86\" sourceendlinenumber=\"86\"><p sourcefile=\"../guideline/csharp_coding_standards.md\" sourcestartlinenumber=\"86\" sourceendlinenumber=\"86\"><strong>DO NOT</strong> capitalize each word in so-called <a href=\"http://msdn.microsoft.com/en-us/library/ms229043.aspx\" data-raw-source=\"[closed-form compound words](http://msdn.microsoft.com/en-us/library/ms229043.aspx)\" sourcefile=\"../guideline/csharp_coding_standards.md\" sourcestartlinenumber=\"86\" sourceendlinenumber=\"86\">closed-form compound words</a>.</p>\n</li>\n<li sourcefile=\"../guideline/csharp_coding_standards.md\" sourcestartlinenumber=\"88\" sourceendlinenumber=\"90\"><p sourcefile=\"../guideline/csharp_coding_standards.md\" sourcestartlinenumber=\"88\" sourceendlinenumber=\"88\"><strong>DO</strong> use <code>Async</code> suffix in the asynchronous method names to notice people how to use it properly</p>\n<pre sourcefile=\"../guideline/csharp_coding_standards.md\" sourcestartlinenumber=\"90\" sourceendlinenumber=\"90\"><code>public async Task&lt;string&gt; LoadContentAsync() { ... }\n</code></pre></li>\n</ul>\n<h3 id=\"formatting-mandatory\" sourcefile=\"../guideline/csharp_coding_standards.md\" sourcestartlinenumber=\"92\" sourceendlinenumber=\"92\">Formatting (Mandatory)</h3>\n<ul sourcefile=\"../guideline/csharp_coding_standards.md\" sourcestartlinenumber=\"93\" sourceendlinenumber=\"93\">\n<li sourcefile=\"../guideline/csharp_coding_standards.md\" sourcestartlinenumber=\"93\" sourceendlinenumber=\"93\"><strong>DO</strong> use spaces over tabs, and always show all spaces/tabs in IDE</li>\n</ul>\n<blockquote sourcefile=\"../guideline/csharp_coding_standards.md\" sourcestartlinenumber=\"95\" sourceendlinenumber=\"95\"><p sourcefile=\"../guideline/csharp_coding_standards.md\" sourcestartlinenumber=\"95\" sourceendlinenumber=\"95\"><strong>Tips</strong></p>\n<p sourcefile=\"../guideline/csharp_coding_standards.md\" sourcestartlinenumber=\"97\" sourceendlinenumber=\"97\">Visual Studio &gt; Tools &gt; Options... &gt; Text Editor &gt; C# &gt; Tabs &gt; Insert spaces (Tab size: 4)</p>\n<p sourcefile=\"../guideline/csharp_coding_standards.md\" sourcestartlinenumber=\"99\" sourceendlinenumber=\"99\">Visual Studio &gt; Edit &gt; Advanced &gt; View White Space (Ctrl+R, Ctrl+W)</p>\n</blockquote>\n<ul sourcefile=\"../guideline/csharp_coding_standards.md\" sourcestartlinenumber=\"101\" sourceendlinenumber=\"110\">\n<li sourcefile=\"../guideline/csharp_coding_standards.md\" sourcestartlinenumber=\"101\" sourceendlinenumber=\"106\"><p sourcefile=\"../guideline/csharp_coding_standards.md\" sourcestartlinenumber=\"101\" sourceendlinenumber=\"101\"><strong>DO</strong> add <em>using</em> inside <em>namespace</em> declaration</p>\n<p sourcefile=\"../guideline/csharp_coding_standards.md\" sourcestartlinenumber=\"103\" sourceendlinenumber=\"106\">  namespace Microsoft.Content.Build.BuildWorker.UnitTest\n  {\n    using System;\n  }</p>\n</li>\n<li sourcefile=\"../guideline/csharp_coding_standards.md\" sourcestartlinenumber=\"108\" sourceendlinenumber=\"110\"><p sourcefile=\"../guideline/csharp_coding_standards.md\" sourcestartlinenumber=\"108\" sourceendlinenumber=\"108\"><strong>DO</strong> add a space when:</p>\n<ol sourcefile=\"../guideline/csharp_coding_standards.md\" sourcestartlinenumber=\"109\" sourceendlinenumber=\"110\">\n<li sourcefile=\"../guideline/csharp_coding_standards.md\" sourcestartlinenumber=\"109\" sourceendlinenumber=\"109\"><code>for (var i = 0; i &lt; 1; i++)</code></li>\n<li sourcefile=\"../guideline/csharp_coding_standards.md\" sourcestartlinenumber=\"110\" sourceendlinenumber=\"110\"><code>if (a == b)</code></li>\n</ol>\n</li>\n</ul>\n<h3 id=\"performace-consideration\" sourcefile=\"../guideline/csharp_coding_standards.md\" sourcestartlinenumber=\"112\" sourceendlinenumber=\"112\">Performace Consideration</h3>\n<ul sourcefile=\"../guideline/csharp_coding_standards.md\" sourcestartlinenumber=\"113\" sourceendlinenumber=\"116\">\n<li sourcefile=\"../guideline/csharp_coding_standards.md\" sourcestartlinenumber=\"113\" sourceendlinenumber=\"113\"><strong>DO</strong> use <code>sealed</code> for private classes if they are not to be inherited.</li>\n<li sourcefile=\"../guideline/csharp_coding_standards.md\" sourcestartlinenumber=\"114\" sourceendlinenumber=\"114\"><strong>DO</strong> add <code>readonly</code> to fields if they do not tend to be changed.</li>\n<li sourcefile=\"../guideline/csharp_coding_standards.md\" sourcestartlinenumber=\"115\" sourceendlinenumber=\"115\"><strong>DO</strong> use <code>static</code> methods if it is not instance relevant.</li>\n<li sourcefile=\"../guideline/csharp_coding_standards.md\" sourcestartlinenumber=\"116\" sourceendlinenumber=\"116\"><strong>DO</strong> use <code>RegexOptions.Compiled</code> for <code>readonly</code> <code>Regex</code>.</li>\n</ul>\n<h3 id=\"cross-platform-coding\" sourcefile=\"../guideline/csharp_coding_standards.md\" sourcestartlinenumber=\"118\" sourceendlinenumber=\"118\">Cross-platform coding</h3>\n<p sourcefile=\"../guideline/csharp_coding_standards.md\" sourcestartlinenumber=\"119\" sourceendlinenumber=\"119\">Our code can and should support multiple operating systems in addition to Windows. Code should be sensitvie to the differences between Operating Systems. Here are some specifics to consider:</p>\n<ul sourcefile=\"../guideline/csharp_coding_standards.md\" sourcestartlinenumber=\"121\" sourceendlinenumber=\"121\">\n<li sourcefile=\"../guideline/csharp_coding_standards.md\" sourcestartlinenumber=\"121\" sourceendlinenumber=\"121\"><strong>DO</strong> use <code>Enviroment.NewLine</code> instead of hard-coding the line break, as Windows uses <code>\\r\\n</code> and OSX/Linux uses <code>\\n</code>.</li>\n</ul>\n<blockquote sourcefile=\"../guideline/csharp_coding_standards.md\" sourcestartlinenumber=\"123\" sourceendlinenumber=\"123\"><p sourcefile=\"../guideline/csharp_coding_standards.md\" sourcestartlinenumber=\"123\" sourceendlinenumber=\"123\"><strong>Note</strong></p>\n<p sourcefile=\"../guideline/csharp_coding_standards.md\" sourcestartlinenumber=\"125\" sourceendlinenumber=\"125\">Be aware that these line-endings may cause problems in code when using <code>@&quot;&quot;</code> text blocks with line breaks, e.g.:</p>\n<pre sourcefile=\"../guideline/csharp_coding_standards.md\" sourcestartlinenumber=\"127\" sourceendlinenumber=\"130\"><code class=\"lang-cs\">var x = @&quot;line1\nline2&quot;;\n</code></pre></blockquote>\n<ul sourcefile=\"../guideline/csharp_coding_standards.md\" sourcestartlinenumber=\"132\" sourceendlinenumber=\"132\">\n<li sourcefile=\"../guideline/csharp_coding_standards.md\" sourcestartlinenumber=\"132\" sourceendlinenumber=\"132\"><strong>DO</strong> use <code>Path.Combine()</code> or <code>Path.DirectorySeparatorChar</code> to separate directories. If this is not possible (such as in scripting), use a forward slash <code>/</code>. Windows is more forgiving than Linux in this regard.</li>\n</ul>\n<h3 id=\"unit-tests-and-functional-tests\" sourcefile=\"../guideline/csharp_coding_standards.md\" sourcestartlinenumber=\"134\" sourceendlinenumber=\"134\">Unit tests and functional tests</h3>\n<h4 id=\"assembly-naming\" sourcefile=\"../guideline/csharp_coding_standards.md\" sourcestartlinenumber=\"135\" sourceendlinenumber=\"135\">Assembly naming</h4>\n<p sourcefile=\"../guideline/csharp_coding_standards.md\" sourcestartlinenumber=\"136\" sourceendlinenumber=\"136\">The unit tests for the <code>Microsoft.Foo</code> assembly live in the <code>Microsoft.Foo.Tests</code> assembly.</p>\n<p sourcefile=\"../guideline/csharp_coding_standards.md\" sourcestartlinenumber=\"138\" sourceendlinenumber=\"138\">The functional tests for the <code>Microsoft.Foo</code> assembly live in the <code>Microsoft.Foo.FunctionalTests</code> assembly.</p>\n<p sourcefile=\"../guideline/csharp_coding_standards.md\" sourcestartlinenumber=\"140\" sourceendlinenumber=\"140\">In general there should be exactly one unit tests assembly for each product runtime assembly. In general there should be one functional tests assembly per repo. Exceptions can be made for both.</p>\n<h4 id=\"unit-test-class-naming\" sourcefile=\"../guideline/csharp_coding_standards.md\" sourcestartlinenumber=\"142\" sourceendlinenumber=\"142\">Unit test class naming</h4>\n<p sourcefile=\"../guideline/csharp_coding_standards.md\" sourcestartlinenumber=\"143\" sourceendlinenumber=\"143\">Test class names end with <code>Test</code> suffix and live in the same namespace as the class being tested. For example, the unit tests for the <code>Microsoft.Foo.Boo</code> class would be in a <code>Microsoft.Foo.BooTest</code> class in the unit tests assembly <code>Microsoft.Foo.Tests</code>.</p>\n<h4 id=\"unit-test-method-naming\" sourcefile=\"../guideline/csharp_coding_standards.md\" sourcestartlinenumber=\"145\" sourceendlinenumber=\"145\">Unit test method naming</h4>\n<p sourcefile=\"../guideline/csharp_coding_standards.md\" sourcestartlinenumber=\"146\" sourceendlinenumber=\"146\">Unit test method names must be descriptive about <em>what developers are testing, under what conditions, and what the expectations are</em>. Pascal casing and underscores can be used to improve readability. The following test names are correct:</p>\n<pre sourcefile=\"../guideline/csharp_coding_standards.md\" sourcestartlinenumber=\"148\" sourceendlinenumber=\"151\"><code class=\"lang-cs\">PublicApiArgumentsShouldHaveNotNullAnnotation\nPublic_api_arguments_should_have_not_null_annotation\n</code></pre><p sourcefile=\"../guideline/csharp_coding_standards.md\" sourcestartlinenumber=\"153\" sourceendlinenumber=\"153\">The following test names are incorrect:</p>\n<pre sourcefile=\"../guideline/csharp_coding_standards.md\" sourcestartlinenumber=\"155\" sourceendlinenumber=\"160\"><code class=\"lang-cs\">Test1\nConstructor\nFormatString\nGetData\n</code></pre><h4 id=\"unit-test-structure\" sourcefile=\"../guideline/csharp_coding_standards.md\" sourcestartlinenumber=\"162\" sourceendlinenumber=\"162\">Unit test structure</h4>\n<p sourcefile=\"../guideline/csharp_coding_standards.md\" sourcestartlinenumber=\"163\" sourceendlinenumber=\"163\">The contents of every unit test should be split into three distinct stages (arrange, act and assert), optionally separated by these comments:</p>\n<pre sourcefile=\"../guideline/csharp_coding_standards.md\" sourcestartlinenumber=\"165\" sourceendlinenumber=\"169\"><code class=\"lang-cs\">// Arrange\n// Act\n// Assert\n</code></pre><p sourcefile=\"../guideline/csharp_coding_standards.md\" sourcestartlinenumber=\"171\" sourceendlinenumber=\"171\">The crucial thing here is the <code>Act</code> stage is exactly one statement. That one statement calls only the one method that you are trying to test. Keeping that one statement as simple as possible is also very important. For example, this is not ideal:</p>\n<pre sourcefile=\"../guideline/csharp_coding_standards.md\" sourcestartlinenumber=\"173\" sourceendlinenumber=\"175\"><code class=\"lang-cs\">int result = myObj.CallSomeMethod(GetComplexParam1(), GetComplexParam2(), GetComplexParam3());\n</code></pre><p sourcefile=\"../guideline/csharp_coding_standards.md\" sourcestartlinenumber=\"177\" sourceendlinenumber=\"177\">This style is not recommended because too much can go wrong in this one statement. All the <code>GetComplexParamN()</code> calls can throw exceptions for a variety of reasons unrelated to the test itself. It is thus unclear to someone running into a problem why the failure occurred.</p>\n<p sourcefile=\"../guideline/csharp_coding_standards.md\" sourcestartlinenumber=\"179\" sourceendlinenumber=\"179\">The ideal pattern is to move the complex parameter building into the <code>Arrange</code> section:</p>\n<pre sourcefile=\"../guideline/csharp_coding_standards.md\" sourcestartlinenumber=\"181\" sourceendlinenumber=\"192\"><code class=\"lang-cs\">// Arrange\nP1 p1 = GetComplexParam1();\nP2 p2 = GetComplexParam2();\nP3 p3 = GetComplexParam3();\n\n// Act\nint result = myObj.CallSomeMethod(p1, p2, p3);\n\n// Assert\nAssert.AreEqual(1234, result);\n</code></pre><p sourcefile=\"../guideline/csharp_coding_standards.md\" sourcestartlinenumber=\"194\" sourceendlinenumber=\"194\">Now the only reason the line with <code>CallSomeMethod()</code> can fail is if the method itself throws an error.</p>\n<h4 id=\"testing-exception-messages\" sourcefile=\"../guideline/csharp_coding_standards.md\" sourcestartlinenumber=\"196\" sourceendlinenumber=\"196\">Testing exception messages</h4>\n<p sourcefile=\"../guideline/csharp_coding_standards.md\" sourcestartlinenumber=\"198\" sourceendlinenumber=\"198\">Testing the specific exception message in a unit test is important. This ensures that the desired exception is being tested rather than a different exception of the same type. In order to verify the exact exception, it is important to verify the message.</p>\n<pre sourcefile=\"../guideline/csharp_coding_standards.md\" sourcestartlinenumber=\"200\" sourceendlinenumber=\"206\"><code class=\"lang-cs\">// Act\nvar ex = Assert.Throws&lt;InvalidOperationException&gt;(() =&gt; fruitBasket.GetBananaById(-1));\n\n// Assert\nAssert.Equal(&quot;Cannot load banana with negative identifier.&quot;, ex.Message);\n</code></pre><h4 id=\"use-xunitnets-plethora-of-built-in-assertions\" sourcefile=\"../guideline/csharp_coding_standards.md\" sourcestartlinenumber=\"208\" sourceendlinenumber=\"208\">Use xUnit.net&#39;s plethora of built-in assertions</h4>\n<p sourcefile=\"../guideline/csharp_coding_standards.md\" sourcestartlinenumber=\"209\" sourceendlinenumber=\"209\">xUnit.net includes many kinds of assertions â€“ please use the most appropriate one for your test. This makes the tests much more readable and also allows the test runner to report the best possible errors (whether it&#39;s local or the CI machine). For example, these are bad:</p>\n<pre sourcefile=\"../guideline/csharp_coding_standards.md\" sourcestartlinenumber=\"211\" sourceendlinenumber=\"225\"><code class=\"lang-cs\">Assert.Equal(true, someBool);\n\nAssert.True(&quot;abc123&quot; == someString);\n\nAssert.True(list1.Length == list2.Length);\n\nfor (int i = 0; i &lt; list1.Length; i++) {\n    Assert.True(\n        String.Equals(\n            list1[i],\n            list2[i],\n            StringComparison.OrdinalIgnoreCase));\n}\n</code></pre><p sourcefile=\"../guideline/csharp_coding_standards.md\" sourcestartlinenumber=\"227\" sourceendlinenumber=\"227\">These are good:</p>\n<pre sourcefile=\"../guideline/csharp_coding_standards.md\" sourcestartlinenumber=\"229\" sourceendlinenumber=\"236\"><code class=\"lang-cs\">Assert.True(someBool);\n\nAssert.Equal(&quot;abc123&quot;, someString);\n\n// built-in collection assertions!\nAssert.Equal(list1, list2, StringComparer.OrdinalIgnoreCase);\n</code></pre><h4 id=\"parallel-tests\" sourcefile=\"../guideline/csharp_coding_standards.md\" sourcestartlinenumber=\"238\" sourceendlinenumber=\"238\">Parallel tests</h4>\n<p sourcefile=\"../guideline/csharp_coding_standards.md\" sourcestartlinenumber=\"239\" sourceendlinenumber=\"239\">By default all unit test assemblies should run in parallel mode, which is the default. Unit tests shouldn&#39;t depend on any shared state, and so should generally be runnable in parallel. If tests fail in parallel, the first thing to do is to figure out why; do not just disable parallel testing!</p>\n<p sourcefile=\"../guideline/csharp_coding_standards.md\" sourcestartlinenumber=\"241\" sourceendlinenumber=\"241\">For functional tests, you can disable parallel tests.</p>\n","type":"Conceptual","source":{"remote":{"path":"Documentation/guideline/csharp_coding_standards.md","branch":"doc","repo":"https://github.com/dotnet/docfx.git"},"startLine":0.0,"endLine":0.0,"isExternal":false},"path":"../guideline/csharp_coding_standards.md","documentation":{"remote":{"path":"Documentation/guideline/csharp_coding_standards.md","branch":"doc","repo":"https://github.com/dotnet/docfx.git"},"startLine":0.0,"endLine":0.0,"isExternal":false},"_docfxVersion":"2.15.0.424","_systemKeys":["conceptual","type","source","path","documentation","title","rawTitle","wordCount"],"title":"C# Coding Standards","rawTitle":"<h1 id=\"c-coding-standards\" sourcefile=\"../guideline/csharp_coding_standards.md\" sourcestartlinenumber=\"5\" sourceendlinenumber=\"6\">C# Coding Standards</h1>","uid":"csharp_coding_standards","wordCount":1298.0,"__global":{"classesInSubtitle":"Classes","structsInSubtitle":"Structs","interfacesInSubtitle":"Interfaces","enumsInSubtitle":"Enums","delegatesInSubtitle":"Delegates","constructorsInSubtitle":"Constructors","fieldsInSubtitle":"Fields","propertiesInSubtitle":"Properties","methodsInSubtitle":"Methods","eventsInSubtitle":"Events","operatorsInSubtitle":"Operators","eiisInSubtitle":"Explicit Interface Implementations","improveThisDoc":"Improve this Doc","viewSource":"View Source","inheritance":"Inheritance","inheritedMembers":"Inherited Members","namespace":"Namespace","assembly":"Assembly","syntax":"Syntax","overrides":"Overrides","implements":"Implements","remarks":"Remarks","examples":"Examples","seealso":"See Also","declaration":"Declaration","parameters":"Parameters","typeParameters":"Type Parameters","type":"Type","name":"Name","description":"Description","returns":"Returns","fieldValue":"Field Value","propertyValue":"Property Value","eventType":"Event Type","exceptions":"Exceptions","condition":"Condition","extensionMethods":"Extension Methods","note":"<h5>Note</h5>","warning":"<h5>Warning</h5>","tip":"<h5>Tip</h5>","important":"<h5>Important</h5>","caution":"<h5>Caution</h5>","_shared":{}},"_disableToc":false,"docurl":"https://github.com/dotnet/docfx/blob/doc/Documentation/guideline/csharp_coding_standards.md/#L1"}